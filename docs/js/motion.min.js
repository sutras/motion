/**
 * @version v2.3.0
 * @link https://github.com/sutras/motion#readme
 * @license MIT
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).motion=n()}(this,(function(){"use strict";var t,n,e,i="scroll",o="resize",r="data-motion",a="class";function u(t,n,e){var i=document.createEvent("HTMLEvents");if(i.initEvent(n,!0,!0),e)for(var o in e)i[o]=e[o];t.dispatchEvent(i)}function s(t){console.warn("[Motion] "+t)}function l(t){return t.replace(/^./,(function(t){return t.toLowerCase()})).replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}function f(t){return t&&"object"==typeof t&&!Array.isArray(t)}function c(t,n,e){t.addEventListener(n,e)}function d(t,n,e){t.removeEventListener(n,e)}function p(t){var n,e={},i=Function;if(t.hasAttribute(r)){e=t.getAttribute(r);try{e=new i("return "+e+";")()}catch(t){n="The value of the data-motion feature must be an array or object that conforms to JavaScript syntax, and what you assign is:\n"+e,console.error("[Motion] "+n)}}else v.forEach((function(n){var i;t.hasAttribute(i="data-motion-"+n)&&(e[n]=t.getAttribute(i))}));return e}var h=h||function(){function t(){this.keys=[],this.values=[]}return t.prototype={constructor:t,set:function(t,n){var e;if(-1===(e=this.keys.indexOf(t)))return this.keys.push(t),this.values.push(n);this.values[e]=n},get:function(t){return this.values[this.keys.indexOf(t)]},has:function(t){return-1!==this.keys.indexOf(t)},delete:function(t){var n;return-1!==(n=this.keys.indexOf(t))&&(this.keys.splice(n,1),this.values.splice(n,1),!0)}},t}(),m={selector:".motion",expandTop:0,expandBottom:0,mobile:!0,scrollContainer:window,throttle:150,queue:"default",scroll:!0,class:"",start:null,end:null,finish:null,name:"fadeIn",duration:null,timingFunction:null,delay:null,iterationCount:null,direction:null,fillMode:null,startType:"motionstart",endType:"motionend",finishType:"motionfinish"},y=["duration","timing-function","delay","iteration-count","direction","fill-mode"],v=[a,"name"].concat(y),w="default";return function(r){var b,g,A,T,x,E,O={},k=[],C=new h;function L(t,n,e){var i,o="data-motion-"+l(n),a=t.hasAttribute(o)?t.getAttribute(o):r[(i=n,i.replace(/[-_][^-_]/g,(function(t){return t.charAt(1).toUpperCase()})).replace(/^./,(function(t){return t.toLowerCase()})))];return e?Number(a):a}function q(t){var n,e,i,o,u,s,c,d,h;for(e in n=function(t){var n,e,i={};if(Array.isArray(t))i[w]=t;else if(f(t))for(n in t)if(f(e=t[n]))i[n]=[e];else{if(!Array.isArray(e)){i[w]=[t];break}i[n]=e}return i}(p(t)),r.scroll&&n.hasOwnProperty(r.queue)&&k.push(t),n){for(i=n[e],o=0;d=i[o++];){for(s in d)c=d[s],delete d[s],d[l(s)]=c;for(u=0;h=v[u++];)d.hasOwnProperty(h)||(d[h]=r[h]);d[a]=["animated",d.name].concat(d[a].trim().split(/ +/).filter((function(t){return""!==t})))}n[e]=i}return n}function M(t){var n,e,i,o,a;return o=C.get(t).expandTop,a=C.get(t).expandBottom,e=(n=r.scrollContainer&&r.scrollContainer.scrollTop||Math.max(window.pageYOffset||0,window.scrollY||0))+Math.min(document.documentElement.clientHeight,window.innerHeight),(i=function(t){var n,e;for(n=t.offsetTop,e=t.offsetLeft;t=t.offsetParent;)n+=t.offsetTop,e+=t.offsetLeft;return{left:e,top:n}}(t).top)+t.offsetHeight>=n-o&&i<=e+a}function P(){d(r.scrollContainer,i,g),d(window,o,g)}function B(){var t,n;for(t=0;n=k[t++];)M(n)&&(S(n),H(n),t--,0===k.length&&P())}function H(t){var n;-1!==(n=k.indexOf(t))&&k.splice(n,1)}function j(t,i,o,r){r&&u(t,e,{motionOver:!0}),setTimeout((function(){var e,r,u;for(t.style.visibility="visible",o.playing=!0,u=y.length;e=y[--u];)r=i[e],"duration"!==e&&"delay"!==e||!/\d$/i.test(r)||(r+="ms"),t.style[n+"-"+e]=r;i[a].forEach((function(n){t.classList.add(n)}))}))}function S(t,i){var o,s,l,f,p,h;o=C.get(t),i=i||w,!o||!(h=o.queues[i])||(f=h.length)<=0||(s=h[l=0],j(t,s,o,!0),u(t,r.startType,{queue:i}),r.start&&r.start(t,i),c(t,e,p=function(c){c.stopPropagation(),o.playing=!1,t.style.removeProperty(n),s[a].forEach((function(n){t.classList.remove(n)})),u(t,r.endType,{queue:i}),r.end&&r.end(t,i),!c.motionOver&&++l<f?j(t,h[l],o):(d(t,e,p),u(t,r.finishType,{queue:i}),r.finish&&r.finish(t,i))}))}return r=r||{},window.AnimationEvent||window.WebKitAnimationEvent?!r.mobile&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(s("You have set the mobile terminal not to animate."),b=!0):(s("Animation is not supported by the current browser."),b=!0),b?{execute:function(){}}:(r=function(t){var n,e,i=1;if(arguments.length>1)for(;n=arguments[i++];)for(e in n)t[e]=n[e];return t}({},m,r||{}),t||(t=!0,(n="animation")in document.body.style||(n=window.WebKitAnimationEvent?"-webkit-animation":"-moz-animation"),e=window.AnimationEvent?"animationend":"webkitAnimationEnd"),Array.prototype.slice.call(document.querySelectorAll(r.selector)).map((function(t){return t.style.visibility="hidden",C.set(t,{playing:!1,queues:q(t),expandTop:L(t,"expandTop",!0),expandBottom:L(t,"expandBottom",!0)}),t})),k.length>0&&(A=B,T=r.throttle,x=null,E=!0,g=function(){var t=arguments;if(E)A.apply(this,t),E=!1;else{if(x)return;x=setTimeout(function(){clearTimeout(x),x=null,A.apply(this,t)}.bind(this),T||150)}},c(r.scrollContainer,i,g),c(window,o,g),g()),O.inspect=function(){B()},O.inspectThrottle=function(){g()},O.destroy=function(){k.length=0,P()},O.execute=S,O)}}));