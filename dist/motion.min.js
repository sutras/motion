/**
 * @version v2.1.0
 * @link https://github.com/sutras/motion#readme
 * @license MIT
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).motion=e()}(this,(function(){"use strict";var t,e,n,i="scroll",o="resize",r="data-motion",a="class";function u(t,e,n){var i=document.createEvent("HTMLEvents");if(i.initEvent(e,!0,!0),n)for(var o in n)i[o]=n[o];t.dispatchEvent(i)}function s(t){console.warn("[Motion] "+t)}function l(t){return t.replace(/^./,(function(t){return t.toLowerCase()})).replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}function f(t){return t&&"object"==typeof t&&!Array.isArray(t)}function c(t,e,n){t.addEventListener(e,n)}function d(t,e,n){t.removeEventListener(e,n)}function p(t){var e,n={},i=Function;if(t.hasAttribute(r)){n=t.getAttribute(r);try{n=new i("return "+n+";")()}catch(t){e="The value of the data-motion feature must be an array or object that conforms to JavaScript syntax, and what you assign is:\n"+n,console.error("[Motion] "+e)}}else v.forEach((function(e){var i;t.hasAttribute(i="data-motion-"+e)&&(n[e]=t.getAttribute(i))}));return n}var h=h||function(){function t(){this.keys=[],this.values=[]}return t.prototype={constructor:t,set:function(t,e){var n;if(-1===(n=this.keys.indexOf(t)))return this.keys.push(t),this.values.push(e);this.values[n]=e},get:function(t){return this.values[this.keys.indexOf(t)]},has:function(t){return-1!==this.keys.indexOf(t)},delete:function(t){var e;return-1!==(e=this.keys.indexOf(t))&&(this.keys.splice(e,1),this.values.splice(e,1),!0)}},t}(),m={selector:".motion",expandTop:0,expandBottom:0,mobile:!0,scrollContainer:window,throttle:150,queue:"default",scroll:!0,class:"",start:null,end:null,finish:null,name:"fadeIn",duration:null,timingFunction:null,delay:null,iterationCount:null,direction:null,fillMode:null,startType:"motionstart",endType:"motionend",finishType:"motionfinish"},y=["duration","timing-function","delay","iteration-count","direction","fill-mode"],v=[a,"name"].concat(y),w="default";return function(r){var b,g,A,T,x,E,O={},k=[],C=new h;function L(t,e,n){var i,o="data-motion-"+l(e),a=t.hasAttribute(o)?t.getAttribute(o):r[(i=e,i.replace(/[-_][^-_]/g,(function(t){return t.charAt(1).toUpperCase()})).replace(/^./,(function(t){return t.toLowerCase()})))];return n?Number(a):a}function q(t){var e,n,i,o,u,s,c,d,h;for(n in e=function(t){var e,n,i={};if(Array.isArray(t))i[w]=t;else if(f(t))for(e in t)if(f(n=t[e]))i[e]=[n];else{if(!Array.isArray(n)){i[w]=[t];break}i[e]=n}return i}(p(t)),r.scroll&&e.hasOwnProperty(r.queue)&&k.push(t),e){for(i=e[n],o=0;d=i[o++];){for(s in d)c=d[s],delete d[s],d[l(s)]=c;for(u=0;h=v[u++];)d.hasOwnProperty(h)||(d[h]=r[h]);d[a]=["animated",d.name].concat(d[a].trim().split(/ +/).filter((function(t){return""!==t})))}e[n]=i}return e}function M(t){var e,n,i,o,a;return o=C.get(t).expandTop,a=C.get(t).expandBottom,n=(e=r.scrollContainer&&r.scrollContainer.scrollTop||Math.max(window.pageYOffset||0,window.scrollY||0))+Math.min(document.documentElement.clientHeight,window.innerHeight),(i=function(t){var e,n;for(e=t.offsetTop,n=t.offsetLeft;t=t.offsetParent;)e+=t.offsetTop,n+=t.offsetLeft;return{left:n,top:e}}(t).top)+t.offsetHeight>=e-o&&i<=n+a}function P(){d(r.scrollContainer,i,g),d(window,o,g)}function B(t){var e;-1!==(e=k.indexOf(t))&&k.splice(e,1)}function H(t,i,o,r){r&&u(t,n,{motionOver:!0}),setTimeout((function(){var n,r,u;for(t.style.visibility="visible",o.playing=!0,u=y.length;n=y[--u];)r=i[n],"duration"!==n&&"delay"!==n||!/\d$/i.test(r)||(r+="ms"),t.style[e+"-"+n]=r;i[a].forEach((function(e){t.classList.add(e)}))}))}function j(t,i){var o,s,l,f,p,h;o=C.get(t),i=i||w,!o||!(h=o.queues[i])||(f=h.length)<=0||(s=h[l=0],H(t,s,o,!0),u(t,r.startType,{queue:i}),r.start&&r.start(t,i),c(t,n,p=function(c){c.stopPropagation(),o.playing=!1,t.style.removeProperty(e),s[a].forEach((function(e){t.classList.remove(e)})),u(t,r.endType,{queue:i}),r.end&&r.end(t,i),!c.motionOver&&++l<f?H(t,h[l],o):(d(t,n,p),u(t,r.finishType,{queue:i}),r.finish&&r.finish(t,i))}))}return window.AnimationEvent||window.WebKitAnimationEvent?!r.mobile&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(s("You have set the mobile terminal not to animate."),b=!0):(s("Animation is not supported by the current browser."),b=!0),b?{execute:function(){}}:(r=function(t){var e,n,i=1;if(arguments.length>1)for(;e=arguments[i++];)for(n in e)t[n]=e[n];return t}({},m,r||{}),t||(t=!0,(e="animation")in document.body.style||(e=window.WebKitAnimationEvent?"-webkit-animation":"-moz-animation"),n=window.AnimationEvent?"animationend":"webkitAnimationEnd"),Array.prototype.slice.call(document.querySelectorAll(r.selector)).map((function(t){return t.style.visibility="hidden",C.set(t,{playing:!1,queues:q(t),expandTop:L(t,"expandTop",!0),expandBottom:L(t,"expandBottom",!0)}),t})),k.length>0&&(A=function(){var t,e;for(t=0;e=k[t++];)M(e)&&(j(e),B(e),t--,0===k.length&&P())},T=r.throttle,x=null,E=!0,g=function(){var t=arguments;if(E)A.apply(this,t),E=!1;else{if(x)return;x=setTimeout(function(){clearTimeout(x),x=null,A.apply(this,t)}.bind(this),T||150)}},c(r.scrollContainer,i,g),c(window,o,g),g()),O.destroy=function(){k.length=0,P()},O.execute=j,O)}}));